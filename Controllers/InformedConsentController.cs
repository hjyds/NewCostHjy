using Microsoft.AspNetCore.Mvc;
using NewCostHjy.Common;
using NewCostHjy.Models;
using Newtonsoft.Json;
using System.Collections.Generic;

namespace NewCostHjy.Controllers {

    /// <summary>
    /// 康康教处方相关
    /// </summary>
    [Route("[controller]")]
    [ApiController]
    public class InformedConsentController : BaseController {

        /// <summary>
        /// 获取病人可以写的健康教育规则模板列表
        /// </summary>
        /// <param name="parIn"></param>
        /// <returns></returns>
        [HttpPost("GetHealthEducationRuleTempList")]
        public IActionResult GetHealthEducationRuleTempList([FromBody] EduRuleTempListPar parIn)
        {
            string strTemp = @"[{""TempId"":""51ad61cf-2467-f96e-08ab-bd5174bf7a40"",""SupTempId"":null,""TempName"":""王庞测试是否健康教育处方_复制"",""AddUrl"":""http://192.168.32.135:8120/meddoc/edit?PId=160471&EncId=1957020&EncType=1&DeptId=148&TempId=51ad61cf-2467-f96e-08ab-bd5174bf7a40&Operator=陈兴隆&OperId=1274276&OperPosition=主任药师&age=17岁&computerIp=127.0.0.1&sourceType=3&userName=777777&password=&babyNum=0&ModifyType=1&DeptName=产科门诊&docType=1&localUrl=http://192.168.32.135:8120"",""TempType"":""知情同意书"",""TempCode"":""0111555"",""IsRequiredField"":""1"",""TempTypeDisplayName"":null,""IsDisable"":null,""IsHealthEducation"":1},{""TempId"":""549454da-47f2-2b57-bf9b-eae6a8ff54db"",""SupTempId"":null,""TempName"":""王庞测试是否健康教育处方"",""AddUrl"":""http://192.168.32.135:8120/meddoc/edit?PId=160471&EncId=1957020&EncType=1&DeptId=148&TempId=549454da-47f2-2b57-bf9b-eae6a8ff54db&Operator=陈兴隆&OperId=1274276&OperPosition=主任药师&age=17岁&computerIp=127.0.0.1&sourceType=3&userName=777777&password=&babyNum=0&ModifyType=1&DeptName=产科门诊&docType=1&localUrl=http://192.168.32.135:8120"",""TempType"":""知情同意书"",""TempCode"":""0111555"",""IsRequiredField"":""0"",""TempTypeDisplayName"":null,""IsDisable"":null,""IsHealthEducation"":1},{""TempId"":""74c5383c-8a9c-2018-7dc8-c8f42161dc37"",""SupTempId"":null,""TempName"":""健康教育处方-P2"",""AddUrl"":""http://192.168.32.135:8120/meddoc/edit?PId=160471&EncId=1957020&EncType=1&DeptId=148&TempId=74c5383c-8a9c-2018-7dc8-c8f42161dc37&Operator=陈兴隆&OperId=1274276&OperPosition=主任药师&age=17岁&computerIp=127.0.0.1&sourceType=3&userName=777777&password=&babyNum=0&ModifyType=1&DeptName=产科门诊&docType=1&localUrl=http://192.168.32.135:8120"",""TempType"":""知情同意书"",""TempCode"":""01111166666"",""IsRequiredField"":""0"",""TempTypeDisplayName"":null,""IsDisable"":null,""IsHealthEducation"":1},{""TempId"":""ada76853-54e4-abe1-5b48-ed6b11346f23"",""SupTempId"":null,""TempName"":""健康教育处方-P1"",""AddUrl"":""http://192.168.32.135:8120/meddoc/edit?PId=160471&EncId=1957020&EncType=1&DeptId=148&TempId=ada76853-54e4-abe1-5b48-ed6b11346f23&Operator=陈兴隆&OperId=1274276&OperPosition=主任药师&age=17岁&computerIp=127.0.0.1&sourceType=3&userName=777777&password=&babyNum=0&ModifyType=1&DeptName=产科门诊&docType=1&localUrl=http://192.168.32.135:8120"",""TempType"":""知情同意书"",""TempCode"":""01111155555"",""IsRequiredField"":""0"",""TempTypeDisplayName"":null,""IsDisable"":null,""IsHealthEducation"":1}]";
            List<HEduOutA> outTemp = JsonConvert.DeserializeObject<List<HEduOutA>>(strTemp);
            EduUrlWteOneMod oneUrlMod = new EduUrlWteOneMod();
            //入参结点
            strTemp = @"{""PId"":160471,""EncId"":1957020,""EncType"":1,""DeptId"":148,""TempId"":""51ad61cf-2467-f96e-08ab-bd5174bf7a40"",""Operator"":""陈兴隆"",""OperId"":1274276,""OperPosition"":""主任药师"",""age"":""17岁"",""computerIp"":""127.0.0.1"",""sourceType"":3,""userName"":""777777"",""password"":null,""babyNum"":0,""ModifyType"":1,""DeptName"":""产科门诊"",""docType"":1,""localUrl"":""http://192.168.32.135:8120"",""HealthType"":0}";
            oneUrlMod = JsonConvert.DeserializeObject<EduUrlWteOneMod>(strTemp);             
            foreach (HEduOutA item in outTemp)
            {
                oneUrlMod = UrlBuilder.HjyParseQueryString(item.AddUrl);
                oneUrlMod.PId = parIn.PId;
                oneUrlMod.EncId = parIn.EncId;
                oneUrlMod.EncType = parIn.EncType;
                oneUrlMod.DeptId = parIn.DeptId;
                oneUrlMod.TempId = item.TempId;
                oneUrlMod.Operator = parIn.Operator;
                oneUrlMod.OperId = parIn.OperId;
                oneUrlMod.OperPosition = parIn.OperPosition;
                oneUrlMod.age = parIn.Age;
                oneUrlMod.sourceType = parIn.SourceType;
                oneUrlMod.userName = parIn.UserName;
                oneUrlMod.babyNum = parIn.BabyNum; 
                oneUrlMod.DeptName = parIn.DeptName;
                //oneUrlMod.docType = parIn.docType;
                //oneUrlMod.HealthType = 1;
                string url = UrlBuilder.BuildUrl("http://192.168.56.1:5888/DocumentWrite/HealthEduEdit", oneUrlMod);
                item.AddUrl = url;
            }
            strTemp = JsonConvert.SerializeObject(parIn);
            return Json(outTemp);
        }

        /// <summary>
        /// 获取病人已经写的健康教育记录列表
        /// </summary>
        /// <param name="parIn"></param>
        /// <returns></returns>
        [HttpPost("GetHealthEducationCsformRecordList")]
        public IActionResult GetHealthEducationCsformRecordList([FromBody] EduWtedPar parIn)
        {
            string strTemp = @"[{""MedDocName"":""王庞测试是否健康教育处方_复制"",""MedDocType"":""知情同意书"",""Creator"":""陈兴隆"",""CreateTime"":""2024-12-24 11:11:32"",""DocStatus"":""已作废"",""LastModifier"":""陈兴隆"",""LastModifyTime"":""2024-12-24 11:37:04"",""DeptName"":""产科门诊"",""DeptId"":""148"",""MedDocId"":""6b90f1c0-c834-4640-bf32-7a1eab0d8cdb"",""SupMedDocId"":null,""IsSign"":1.0,""IsAllDocSign"":1.0,""PatIsSign"":""0"",""DocIsSign"":""0"",""EvaResult"":null,""TemplateId"":""51ad61cf-2467-f96e-08ab-bd5174bf7a40"",""TemplateCode"":""0111555"",""TemplateNo"":169.0,""TempTypeId"":null,""PreviewUrl"":""http://192.168.32.135:8120/MedDoc/index?PId=160471&EncType=1&EncId=1957020&MedDocId=6b90f1c0-c834-4640-bf32-7a1eab0d8cdb&Operator=陈兴隆&OperId=1274276&UserName=CXL&OperDeptId=148&DeptName=产科门诊&ModifyType=0&IsPrint=1&docType=1&localUrl=http://192.168.32.135:8120"",""EditUrl"":""http://192.168.32.135:8120/MedDoc/edit?PId=160471&EncId=1957020&babyNum=0&EncType=1&DeptId=148&DeptName=产科门诊&MedDocId=6b90f1c0-c834-4640-bf32-7a1eab0d8cdb&Operator=陈兴隆&OperPosition=主任药师&ModifyType=2&isSign=1&TempId=51ad61cf-2467-f96e-08ab-bd5174bf7a40&OperId=1274276&UserName=CXL&PatIsSign=0&docType=1&operation=1&localUrl=http://192.168.32.135:8120"",""PrintSign"":""0"",""NeddArrangement"":null,""TypeId"":null,""BusinessGroupId"":null,""Rno"":""3"",""MedicalTypeSign"":null,""PrintControl"":0.0,""IfHasReview"":0.0,""Auditors"":null,""AuditTime"":null,""LastAuditors"":null,""LastAuditTime"":null,""Completor"":null,""CompleteTime"":null,""AppointAuditor"":null,""LastPrintor"":null,""LastPrintTime"":null,""DocNo"":1.0,""PatSignStatu"":1.0,""DocSignStatu"":1.0,""WriteCmpltr"":null,""MustSignStatu"":0,""ManualCompleteOper"":null,""CompleteAllSign"":""1"",""cda_doc_code"":null,""system_id"":null,""ReportType"":null,""PatId"":""160471"",""VisitId"":""1957020"",""PatType"":""1"",""BabySign"":""0"",""IsCanAutoPrint"":0,""IsHealthEducation"":1},{""MedDocName"":""王庞测试是否健康教育处方_复制"",""MedDocType"":""知情同意书"",""Creator"":""陈兴隆"",""CreateTime"":""2024-12-24 11:48:07"",""DocStatus"":""已作废"",""LastModifier"":""陈兴隆"",""LastModifyTime"":""2024-12-24 11:53:48"",""DeptName"":""产科门诊"",""DeptId"":""148"",""MedDocId"":""186694f5-7ab9-4918-a627-4207651ccb88"",""SupMedDocId"":null,""IsSign"":1.0,""IsAllDocSign"":1.0,""PatIsSign"":""0"",""DocIsSign"":""0"",""EvaResult"":null,""TemplateId"":""51ad61cf-2467-f96e-08ab-bd5174bf7a40"",""TemplateCode"":""0111555"",""TemplateNo"":169.0,""TempTypeId"":null,""PreviewUrl"":""http://192.168.32.135:8120/MedDoc/index?PId=160471&EncType=1&EncId=1957020&MedDocId=186694f5-7ab9-4918-a627-4207651ccb88&Operator=陈兴隆&OperId=1274276&UserName=CXL&OperDeptId=148&DeptName=产科门诊&ModifyType=0&IsPrint=1&docType=1&localUrl=http://192.168.32.135:8120"",""EditUrl"":""http://192.168.32.135:8120/MedDoc/edit?PId=160471&EncId=1957020&babyNum=0&EncType=1&DeptId=148&DeptName=产科门诊&MedDocId=186694f5-7ab9-4918-a627-4207651ccb88&Operator=陈兴隆&OperPosition=主任药师&ModifyType=2&isSign=1&TempId=51ad61cf-2467-f96e-08ab-bd5174bf7a40&OperId=1274276&UserName=CXL&PatIsSign=0&docType=1&operation=1&localUrl=http://192.168.32.135:8120"",""PrintSign"":""0"",""NeddArrangement"":null,""TypeId"":null,""BusinessGroupId"":null,""Rno"":""5"",""MedicalTypeSign"":null,""PrintControl"":0.0,""IfHasReview"":0.0,""Auditors"":null,""AuditTime"":null,""LastAuditors"":null,""LastAuditTime"":null,""Completor"":null,""CompleteTime"":null,""AppointAuditor"":null,""LastPrintor"":null,""LastPrintTime"":null,""DocNo"":1.0,""PatSignStatu"":1.0,""DocSignStatu"":1.0,""WriteCmpltr"":null,""MustSignStatu"":0,""ManualCompleteOper"":null,""CompleteAllSign"":""1"",""cda_doc_code"":null,""system_id"":null,""ReportType"":null,""PatId"":""160471"",""VisitId"":""1957020"",""PatType"":""1"",""BabySign"":""0"",""IsCanAutoPrint"":0,""IsHealthEducation"":1},{""MedDocName"":""王庞测试是否健康教育处方_复制"",""MedDocType"":""知情同意书"",""Creator"":""陈兴隆"",""CreateTime"":""2024-12-24 13:58:08"",""DocStatus"":""已作废"",""LastModifier"":""陈兴隆"",""LastModifyTime"":""2024-12-24 14:02:24"",""DeptName"":""产科门诊"",""DeptId"":""148"",""MedDocId"":""fcbd5d19-9e98-4124-a7f1-ef97d7421442"",""SupMedDocId"":null,""IsSign"":1.0,""IsAllDocSign"":1.0,""PatIsSign"":""0"",""DocIsSign"":""0"",""EvaResult"":null,""TemplateId"":""51ad61cf-2467-f96e-08ab-bd5174bf7a40"",""TemplateCode"":""0111555"",""TemplateNo"":169.0,""TempTypeId"":null,""PreviewUrl"":""http://192.168.32.135:8120/MedDoc/index?PId=160471&EncType=1&EncId=1957020&MedDocId=fcbd5d19-9e98-4124-a7f1-ef97d7421442&Operator=陈兴隆&OperId=1274276&UserName=CXL&OperDeptId=148&DeptName=产科门诊&ModifyType=0&IsPrint=1&docType=1&localUrl=http://192.168.32.135:8120"",""EditUrl"":""http://192.168.32.135:8120/MedDoc/edit?PId=160471&EncId=1957020&babyNum=0&EncType=1&DeptId=148&DeptName=产科门诊&MedDocId=fcbd5d19-9e98-4124-a7f1-ef97d7421442&Operator=陈兴隆&OperPosition=主任药师&ModifyType=2&isSign=1&TempId=51ad61cf-2467-f96e-08ab-bd5174bf7a40&OperId=1274276&UserName=CXL&PatIsSign=0&docType=1&operation=1&localUrl=http://192.168.32.135:8120"",""PrintSign"":""0"",""NeddArrangement"":null,""TypeId"":null,""BusinessGroupId"":null,""Rno"":""8"",""MedicalTypeSign"":null,""PrintControl"":0.0,""IfHasReview"":0.0,""Auditors"":null,""AuditTime"":null,""LastAuditors"":null,""LastAuditTime"":null,""Completor"":null,""CompleteTime"":null,""AppointAuditor"":null,""LastPrintor"":null,""LastPrintTime"":null,""DocNo"":1.0,""PatSignStatu"":1.0,""DocSignStatu"":1.0,""WriteCmpltr"":null,""MustSignStatu"":0,""ManualCompleteOper"":null,""CompleteAllSign"":""1"",""cda_doc_code"":null,""system_id"":null,""ReportType"":null,""PatId"":""160471"",""VisitId"":""1957020"",""PatType"":""1"",""BabySign"":""0"",""IsCanAutoPrint"":0,""IsHealthEducation"":1},{""MedDocName"":""王庞测试是否健康教育处方_复制"",""MedDocType"":""知情同意书"",""Creator"":""陈兴隆"",""CreateTime"":""2024-12-24 11:13:42"",""DocStatus"":""已作废"",""LastModifier"":""陈兴隆"",""LastModifyTime"":""2024-12-24 11:38:45"",""DeptName"":""产科门诊"",""DeptId"":""148"",""MedDocId"":""40af4321-e247-41a3-a362-bb743f7dcf4e"",""SupMedDocId"":null,""IsSign"":1.0,""IsAllDocSign"":1.0,""PatIsSign"":""0"",""DocIsSign"":""0"",""EvaResult"":null,""TemplateId"":""51ad61cf-2467-f96e-08ab-bd5174bf7a40"",""TemplateCode"":""0111555"",""TemplateNo"":169.0,""TempTypeId"":null,""PreviewUrl"":""http://192.168.32.135:8120/MedDoc/index?PId=160471&EncType=1&EncId=1957020&MedDocId=40af4321-e247-41a3-a362-bb743f7dcf4e&Operator=陈兴隆&OperId=1274276&UserName=CXL&OperDeptId=148&DeptName=产科门诊&ModifyType=0&IsPrint=1&docType=1&localUrl=http://192.168.32.135:8120"",""EditUrl"":""http://192.168.32.135:8120/MedDoc/edit?PId=160471&EncId=1957020&babyNum=0&EncType=1&DeptId=148&DeptName=产科门诊&MedDocId=40af4321-e247-41a3-a362-bb743f7dcf4e&Operator=陈兴隆&OperPosition=主任药师&ModifyType=2&isSign=1&TempId=51ad61cf-2467-f96e-08ab-bd5174bf7a40&OperId=1274276&UserName=CXL&PatIsSign=0&docType=1&operation=1&localUrl=http://192.168.32.135:8120"",""PrintSign"":""0"",""NeddArrangement"":null,""TypeId"":null,""BusinessGroupId"":null,""Rno"":""4"",""MedicalTypeSign"":null,""PrintControl"":0.0,""IfHasReview"":0.0,""Auditors"":null,""AuditTime"":null,""LastAuditors"":null,""LastAuditTime"":null,""Completor"":null,""CompleteTime"":null,""AppointAuditor"":null,""LastPrintor"":null,""LastPrintTime"":null,""DocNo"":2.0,""PatSignStatu"":1.0,""DocSignStatu"":1.0,""WriteCmpltr"":null,""MustSignStatu"":0,""ManualCompleteOper"":null,""CompleteAllSign"":""1"",""cda_doc_code"":null,""system_id"":null,""ReportType"":null,""PatId"":""160471"",""VisitId"":""1957020"",""PatType"":""1"",""BabySign"":""0"",""IsCanAutoPrint"":0,""IsHealthEducation"":1},{""MedDocName"":""健康教育处方-P2"",""MedDocType"":""知情同意书"",""Creator"":""陈兴隆"",""CreateTime"":""2024-12-24 11:49:01"",""DocStatus"":""已作废"",""LastModifier"":""陈兴隆"",""LastModifyTime"":""2024-12-24 11:56:20"",""DeptName"":""产科门诊"",""DeptId"":""148"",""MedDocId"":""db26d033-af43-48a9-a4d6-d4ff988f89fc"",""SupMedDocId"":null,""IsSign"":1.0,""IsAllDocSign"":1.0,""PatIsSign"":""0"",""DocIsSign"":""0"",""EvaResult"":null,""TemplateId"":""74c5383c-8a9c-2018-7dc8-c8f42161dc37"",""TemplateCode"":""01111166666"",""TemplateNo"":549.0,""TempTypeId"":null,""PreviewUrl"":""http://192.168.32.135:8120/MedDoc/index?PId=160471&EncType=1&EncId=1957020&MedDocId=db26d033-af43-48a9-a4d6-d4ff988f89fc&Operator=陈兴隆&OperId=1274276&UserName=CXL&OperDeptId=148&DeptName=产科门诊&ModifyType=0&IsPrint=1&docType=1&localUrl=http://192.168.32.135:8120"",""EditUrl"":""http://192.168.32.135:8120/MedDoc/edit?PId=160471&EncId=1957020&babyNum=0&EncType=1&DeptId=148&DeptName=产科门诊&MedDocId=db26d033-af43-48a9-a4d6-d4ff988f89fc&Operator=陈兴隆&OperPosition=主任药师&ModifyType=2&isSign=1&TempId=74c5383c-8a9c-2018-7dc8-c8f42161dc37&OperId=1274276&UserName=CXL&PatIsSign=0&docType=1&operation=1&localUrl=http://192.168.32.135:8120"",""PrintSign"":""0"",""NeddArrangement"":null,""TypeId"":null,""BusinessGroupId"":null,""Rno"":""6"",""MedicalTypeSign"":null,""PrintControl"":0.0,""IfHasReview"":0.0,""Auditors"":null,""AuditTime"":null,""LastAuditors"":null,""LastAuditTime"":null,""Completor"":null,""CompleteTime"":null,""AppointAuditor"":null,""LastPrintor"":null,""LastPrintTime"":null,""DocNo"":2.0,""PatSignStatu"":1.0,""DocSignStatu"":1.0,""WriteCmpltr"":null,""MustSignStatu"":0,""ManualCompleteOper"":null,""CompleteAllSign"":""1"",""cda_doc_code"":null,""system_id"":null,""ReportType"":null,""PatId"":""160471"",""VisitId"":""1957020"",""PatType"":""1"",""BabySign"":""0"",""IsCanAutoPrint"":0,""IsHealthEducation"":1},{""MedDocName"":""王庞测试是否健康教育处方"",""MedDocType"":""知情同意书"",""Creator"":""陈兴隆"",""CreateTime"":""2024-12-24 13:57:41"",""DocStatus"":""已书写"",""LastModifier"":""陈兴隆"",""LastModifyTime"":""2024-12-24 13:57:41"",""DeptName"":""产科门诊"",""DeptId"":""148"",""MedDocId"":""513bf7cc-0771-43e0-bd78-2a3725e86f45"",""SupMedDocId"":null,""IsSign"":1.0,""IsAllDocSign"":1.0,""PatIsSign"":""0"",""DocIsSign"":""0"",""EvaResult"":null,""TemplateId"":""549454da-47f2-2b57-bf9b-eae6a8ff54db"",""TemplateCode"":""0111555"",""TemplateNo"":170.0,""TempTypeId"":null,""PreviewUrl"":""http://192.168.32.135:8120/MedDoc/index?PId=160471&EncType=1&EncId=1957020&MedDocId=513bf7cc-0771-43e0-bd78-2a3725e86f45&Operator=陈兴隆&OperId=1274276&UserName=CXL&OperDeptId=148&DeptName=产科门诊&ModifyType=0&IsPrint=1&docType=1&localUrl=http://192.168.32.135:8120"",""EditUrl"":""http://192.168.32.135:8120/MedDoc/edit?PId=160471&EncId=1957020&babyNum=0&EncType=1&DeptId=148&DeptName=产科门诊&MedDocId=513bf7cc-0771-43e0-bd78-2a3725e86f45&Operator=陈兴隆&OperPosition=主任药师&ModifyType=2&isSign=1&TempId=549454da-47f2-2b57-bf9b-eae6a8ff54db&OperId=1274276&UserName=CXL&PatIsSign=0&docType=1&operation=1&localUrl=http://192.168.32.135:8120"",""PrintSign"":""0"",""NeddArrangement"":null,""TypeId"":null,""BusinessGroupId"":null,""Rno"":""7"",""MedicalTypeSign"":null,""PrintControl"":0.0,""IfHasReview"":0.0,""Auditors"":null,""AuditTime"":null,""LastAuditors"":null,""LastAuditTime"":null,""Completor"":null,""CompleteTime"":null,""AppointAuditor"":null,""LastPrintor"":null,""LastPrintTime"":null,""DocNo"":2.0,""PatSignStatu"":1.0,""DocSignStatu"":1.0,""WriteCmpltr"":null,""MustSignStatu"":0,""ManualCompleteOper"":null,""CompleteAllSign"":""1"",""cda_doc_code"":null,""system_id"":null,""ReportType"":null,""PatId"":""160471"",""VisitId"":""1957020"",""PatType"":""1"",""BabySign"":""0"",""IsCanAutoPrint"":0,""IsHealthEducation"":1},{""MedDocName"":""健康教育处方-P2"",""MedDocType"":""知情同意书"",""Creator"":""陈兴隆"",""CreateTime"":""2024-12-24 10:37:11"",""DocStatus"":""已作废"",""LastModifier"":""陈兴隆"",""LastModifyTime"":""2024-12-24 11:43:00"",""DeptName"":""产科门诊"",""DeptId"":""148"",""MedDocId"":""6502a165-b1d8-40de-823a-d23fac152f1f"",""SupMedDocId"":null,""IsSign"":1.0,""IsAllDocSign"":1.0,""PatIsSign"":""0"",""DocIsSign"":""0"",""EvaResult"":null,""TemplateId"":""74c5383c-8a9c-2018-7dc8-c8f42161dc37"",""TemplateCode"":""01111166666"",""TemplateNo"":549.0,""TempTypeId"":null,""PreviewUrl"":""http://192.168.32.135:8120/MedDoc/index?PId=160471&EncType=1&EncId=1957020&MedDocId=6502a165-b1d8-40de-823a-d23fac152f1f&Operator=陈兴隆&OperId=1274276&UserName=CXL&OperDeptId=148&DeptName=产科门诊&ModifyType=0&IsPrint=1&docType=1&localUrl=http://192.168.32.135:8120"",""EditUrl"":""http://192.168.32.135:8120/MedDoc/edit?PId=160471&EncId=1957020&babyNum=0&EncType=1&DeptId=148&DeptName=产科门诊&MedDocId=6502a165-b1d8-40de-823a-d23fac152f1f&Operator=陈兴隆&OperPosition=主任药师&ModifyType=2&isSign=1&TempId=74c5383c-8a9c-2018-7dc8-c8f42161dc37&OperId=1274276&UserName=CXL&PatIsSign=0&docType=1&operation=1&localUrl=http://192.168.32.135:8120"",""PrintSign"":""0"",""NeddArrangement"":null,""TypeId"":null,""BusinessGroupId"":null,""Rno"":""1"",""MedicalTypeSign"":null,""PrintControl"":0.0,""IfHasReview"":0.0,""Auditors"":null,""AuditTime"":null,""LastAuditors"":null,""LastAuditTime"":null,""Completor"":null,""CompleteTime"":null,""AppointAuditor"":null,""LastPrintor"":null,""LastPrintTime"":null,""DocNo"":3.0,""PatSignStatu"":1.0,""DocSignStatu"":1.0,""WriteCmpltr"":null,""MustSignStatu"":0,""ManualCompleteOper"":null,""CompleteAllSign"":""1"",""cda_doc_code"":null,""system_id"":null,""ReportType"":null,""PatId"":""160471"",""VisitId"":""1957020"",""PatType"":""1"",""BabySign"":""0"",""IsCanAutoPrint"":0,""IsHealthEducation"":1},{""MedDocName"":""健康教育处方-P2"",""MedDocType"":""知情同意书"",""Creator"":""陈兴隆"",""CreateTime"":""2024-12-24 11:04:00"",""DocStatus"":""已作废"",""LastModifier"":""陈兴隆"",""LastModifyTime"":""2024-12-24 11:47:55"",""DeptName"":""产科门诊"",""DeptId"":""148"",""MedDocId"":""8514836a-170f-4885-a989-f2425d4e8868"",""SupMedDocId"":null,""IsSign"":1.0,""IsAllDocSign"":1.0,""PatIsSign"":""0"",""DocIsSign"":""0"",""EvaResult"":null,""TemplateId"":""74c5383c-8a9c-2018-7dc8-c8f42161dc37"",""TemplateCode"":""01111166666"",""TemplateNo"":549.0,""TempTypeId"":null,""PreviewUrl"":""http://192.168.32.135:8120/MedDoc/index?PId=160471&EncType=1&EncId=1957020&MedDocId=8514836a-170f-4885-a989-f2425d4e8868&Operator=陈兴隆&OperId=1274276&UserName=CXL&OperDeptId=148&DeptName=产科门诊&ModifyType=0&IsPrint=1&docType=1&localUrl=http://192.168.32.135:8120"",""EditUrl"":""http://192.168.32.135:8120/MedDoc/edit?PId=160471&EncId=1957020&babyNum=0&EncType=1&DeptId=148&DeptName=产科门诊&MedDocId=8514836a-170f-4885-a989-f2425d4e8868&Operator=陈兴隆&OperPosition=主任药师&ModifyType=2&isSign=1&TempId=74c5383c-8a9c-2018-7dc8-c8f42161dc37&OperId=1274276&UserName=CXL&PatIsSign=0&docType=1&operation=1&localUrl=http://192.168.32.135:8120"",""PrintSign"":""0"",""NeddArrangement"":null,""TypeId"":null,""BusinessGroupId"":null,""Rno"":""2"",""MedicalTypeSign"":null,""PrintControl"":0.0,""IfHasReview"":0.0,""Auditors"":null,""AuditTime"":null,""LastAuditors"":null,""LastAuditTime"":null,""Completor"":null,""CompleteTime"":null,""AppointAuditor"":null,""LastPrintor"":null,""LastPrintTime"":null,""DocNo"":4.0,""PatSignStatu"":1.0,""DocSignStatu"":1.0,""WriteCmpltr"":null,""MustSignStatu"":0,""ManualCompleteOper"":null,""CompleteAllSign"":""1"",""cda_doc_code"":null,""system_id"":null,""ReportType"":null,""PatId"":""160471"",""VisitId"":""1957020"",""PatType"":""1"",""BabySign"":""0"",""IsCanAutoPrint"":0,""IsHealthEducation"":1}]";
            var outTemp = JsonConvert.DeserializeObject<List<HEduOutB>>(strTemp);
            strTemp = JsonConvert.SerializeObject(parIn);
            return Json(outTemp);
        }
    }
}
